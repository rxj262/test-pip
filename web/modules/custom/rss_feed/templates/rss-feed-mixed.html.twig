{# default plain list of items #}

{% if vars.parent_field == 'field_robust_3_page_ref' %}
  {% set content_classes = 'main-content-feed' %}
{% else %}
  {% set content_classes = 'non-main-content-feed' %}
{% endif %}

{% if vars.type == 'events' %}
  <div class='feed flex-1 events-feed {{ content_classes }}' >
  <ul>
    {% for item in vars.feeds|slice(0, min(vars.feeds|length, vars.display_limit)) %}
      <li>
        <div class='feed-item-block flex'>
          <div class='feed-item-daterange'>
            <span class='month'>{{ item.month }}</span>
            <span class='day'>{{ item.day }}</span>
          </div>
          <div class='feed-item-title'>
            <a hreflang='en' href={{ item.link }}>{{ item.title }}</a>
          </div>
        </div>
      </li>
    {% endfor %}
  </ul>
{% endif %}

{% if vars.type == 'news' %}
  <div class='feed flex-1 news-feed {{ content_classes }}' >
    <ul>
      {% for item in vars.feeds %}
        {% if loop.index <= min(vars.feeds|length, vars.display_limit) %}
          <li class="media">
            <div class="media-object media-left">
              <a href="{{ item.index.link }}">
                <div class="media-image-container">
                  <img class="img-responsive" src="{{ item.description.image_src }}" alt="{{ item.description.image_alt }}" />
                </div>
              </a>
            </div>
            <div class="media-body">
              <h3 class="font-medium"><a href="{{ item.link }}">{{ item.title }}</a></h3>
              <div class="article-date">{{ item.pubDate|date("F d, Y") }}</div>
              {% autoescape false %}
                <div>{{ item.description.text|slice(0, 353)|split(' ')|slice(0, -1)|join(' ') ~ 'â€¦' }}</div>
              {% endautoescape %}
            </div>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
{% endif %}
